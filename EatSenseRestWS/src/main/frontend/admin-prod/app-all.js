/*
Copyright(c) 2011 Company Name
*/
Ext.require("Ext.container.Viewport");Ext.application({name:"eatSense DickPit",launch:function(){Ext.create("Ext.container.Viewport",{layout:"fit",id:"viewport",items:[{xtype:"panel",title:"eatSense admin panel",itemId:"wrapper",layout:{type:"fit",},items:[{xtype:"tabpanel",items:[{xtype:"panel",title:"data mass import",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",html:"<h1>Use Textarea below to input json data containing restaurant, spot, menu informations. </h1>",height:20,style:{margin:"10px"}},{xtype:"textareafield",flex:1,id:"jsonData",allowBlank:false,name:"message",fieldLabel:"JSON data",labelAlign:"top",style:{margin:"10px"}},],dockedItems:[{xtype:"toolbar",dock:"bottom",items:[{xtype:"button",text:"Clear data field",handler:function(){Ext.getCmp("jsonData").setValue("")}},{xtype:"button",text:"Upload data",handler:function(){Ext.Ajax.request({url:"/c/businesses/import",method:"PUT",scope:this,jsonData:Ext.getCmp("jsonData").getValue(),success:function(a){Ext.Msg.alert("Success","Upload finished")},failure:function(a){Ext.Msg.alert("Error",a.statusText)}})}},{xtype:"button",text:"Delete all datastore content",handler:function(){Ext.Msg.show({title:"ATTENTION",msg:"This will <strong>delete</strong> all data. <br/> This function will be removed in production.",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(a){if(a=="yes"){Ext.Ajax.request({url:"/c/businesses/all",method:"DELETE",success:function(b){Ext.Msg.alert("Success","All data deleted. I'm sure you know what you did!")},failure:function(b){Ext.Msg.alert("Error",b.statusText)}})}}})}},{xtype:"button",text:"Delete live data",handler:function(){Ext.Msg.show({title:"ATTENTION",msg:"This will <strong>delete</strong> all only live data. <br/> This function will be removed in production.",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(a){if(a=="yes"){Ext.Ajax.request({url:"/c/businesses/livedata",method:"DELETE",success:function(b){Ext.Msg.alert("Success","All live data deleted. I'm sure you know what you did!")},failure:function(b){Ext.Msg.alert("Error",b.statusText)}})}}})}},{xtype:"button",text:"Create Account",handler:function(){Ext.Msg.show({title:"ATTENTION",msg:"This will create an account for existing businesses.",buttons:Ext.Msg.YESNO,icon:Ext.Msg.QUESTION,fn:function(a){if(a=="yes"){Ext.Ajax.request({url:"/c/businesses/dummieusers",method:"PUT",success:function(b){},failure:function(b){Ext.Msg.alert("Error",b.statusText)}})}}})}},]}]},{xtype:"panel",title:"nickname import",layout:{type:"vbox",align:"stretch"},items:[{xtype:"container",html:"<h1>Use Textarea below to input json data containing nickname  informations. </h1>",height:20,style:{margin:"10px"}},{xtype:"textareafield",flex:1,id:"nicknameData",allowBlank:false,name:"message",fieldLabel:"JSON data",labelAlign:"top",style:{margin:"10px"}},{xtype:"radiogroup",fieldLabel:"Nickname type",id:"nicknameType",columns:1,vertical:true,items:[{boxLabel:"Nickname",name:"nicknameRb",inputValue:"noun",checked:true},{boxLabel:"Adjective",name:"nicknameRb",inputValue:"adjective"}]}],dockedItems:[{xtype:"toolbar",dock:"bottom",items:[{xtype:"button",text:"Clear data field",handler:function(){Ext.getCmp("nicknameData").setValue("")}},{xtype:"button",text:"Upload data",handler:function(){var b=Ext.getCmp("nicknameType"),a=b.getValue();Ext.Ajax.request({url:"/nicknames/"+a.nicknameRb+"/list",method:"PUT",scope:this,jsonData:Ext.getCmp("nicknameData").getValue(),success:function(c){Ext.Msg.alert("Success","Upload finished")},failure:function(c){Ext.Msg.alert("Error",c.statusText)}})}}]}]},]}]}]})}});
